{"remainingRequest":"/home/valter/work/demo7/node_modules/ts-loader/index.js??ref--14-1!/home/valter/work/demo7/node_modules/eslint-loader/index.js??ref--13-0!/home/valter/work/demo7/src/assets/ts/components/MenuComponent.ts","dependencies":[{"path":"/home/valter/work/demo7/src/assets/ts/components/MenuComponent.ts","mtime":1636661312000},{"path":"/home/valter/work/demo7/node_modules/cache-loader/dist/cjs.js","mtime":1665764724378},{"path":"/home/valter/work/demo7/node_modules/ts-loader/index.js","mtime":1665764724869},{"path":"/home/valter/work/demo7/node_modules/eslint-loader/index.js","mtime":1665764716618}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlUG9wcGVyIH0gZnJvbSAnQHBvcHBlcmpzL2NvcmUnOwppbXBvcnQgeyBnZXRFbGVtZW50Q2hpbGQsIGdldEVsZW1lbnRQYXJlbnRzLCBnZXRBdHRyaWJ1dGVWYWx1ZUJ5QnJlYWtwb2ludCwgZ2V0VW5pcXVlSWRXaXRoUHJlZml4LCBEYXRhVXRpbCwgRWxlbWVudFN0eWxlVXRpbCwgRXZlbnRIYW5kbGVyVXRpbCwgaW5zZXJ0QWZ0ZXJFbGVtZW50LCBzbGlkZVVwLCBzbGlkZURvd24sIERPTUV2ZW50SGFuZGxlclV0aWwsIHRocm90dGxlLCBnZXRIaWdoZXN0WmluZGV4LCB9IGZyb20gJy4uL191dGlscy9pbmRleCc7CnZhciBkZWZhdWx0TWVudU9wdGlvbnMgPSB7CiAgICBkcm9wZG93bjogewogICAgICAgIGhvdmVyVGltZW91dDogMjAwLAogICAgICAgIHppbmRleDogMTA1LAogICAgfSwKICAgIGFjY29yZGlvbjogewogICAgICAgIHNsaWRlU3BlZWQ6IDI1MCwKICAgICAgICBleHBhbmQ6IGZhbHNlLAogICAgfSwKfTsKdmFyIE1lbnVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBNZW51Q29tcG9uZW50KF9lbGVtZW50LCBvcHRpb25zKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB0aGlzLnRyaWdnZXJFbGVtZW50ID0gbnVsbDsKICAgICAgICAvLyBTZXQgZXh0ZXJuYWwgdHJpZ2dlciBlbGVtZW50CiAgICAgICAgdGhpcy5fc2V0VHJpZ2dlckVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1rdC1tZW51LXRhcmdldD1cIiMiICsgX3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJykgKyAiXCIiKTsKICAgICAgICAgICAgaWYgKHRhcmdldCkgewogICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlckVsZW1lbnQgPSB0YXJnZXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuZWxlbWVudC5jbG9zZXN0KCdbZGF0YS1rdC1tZW51LXRyaWdnZXJdJykpIHsKICAgICAgICAgICAgICAgIF90aGlzLnRyaWdnZXJFbGVtZW50ID0gX3RoaXMuZWxlbWVudC5jbG9zZXN0KCdbZGF0YS1rdC1tZW51LXRyaWdnZXJdJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMuZWxlbWVudC5wYXJlbnROb2RlICYmCiAgICAgICAgICAgICAgICBnZXRFbGVtZW50Q2hpbGQoX3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLCAnW2RhdGEta3QtbWVudS10cmlnZ2VyXScpKSB7CiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBnZXRFbGVtZW50Q2hpbGQoX3RoaXMuZWxlbWVudC5wYXJlbnROb2RlLCAnW2RhdGEta3QtbWVudS10cmlnZ2VyXScpOwogICAgICAgICAgICAgICAgaWYgKGNoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlckVsZW1lbnQgPSBjaGlsZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMudHJpZ2dlckVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIERhdGFVdGlsLnNldChfdGhpcy50cmlnZ2VyRWxlbWVudCwgJ21lbnUnLCBfdGhpcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vIFRlc3QgaWYgbWVudSBoYXMgZXh0ZXJuYWwgdHJpZ2dlciBlbGVtZW50CiAgICAgICAgdGhpcy5faXNUcmlnZ2VyRWxlbWVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyRWxlbWVudCA9PT0gaXRlbTsKICAgICAgICB9OwogICAgICAgIC8vIEdldCBpdGVtIG9wdGlvbih0aHJvdWdoIGh0bWwgYXR0cmlidXRlcykKICAgICAgICB0aGlzLl9nZXRJdGVtT3B0aW9uID0gZnVuY3Rpb24gKGl0ZW0sIG5hbWUpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gbnVsbDsKICAgICAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5oYXNBdHRyaWJ1dGUoJ2RhdGEta3QtbWVudS0nICsgbmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhciBhdHRyID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEta3QtbWVudS0nICsgbmFtZSkgfHwgJyc7CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGdldEF0dHJpYnV0ZVZhbHVlQnlCcmVha3BvaW50KGF0dHIpOwogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIFN0cmluZyh2YWx1ZSkgPT09ICd0cnVlJykgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlICE9PSBudWxsICYmIFN0cmluZyh2YWx1ZSkgPT09ICdmYWxzZScpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9OwogICAgICAgIC8vIEdldCBpdGVtIGVsZW1lbnQKICAgICAgICB0aGlzLl9nZXRJdGVtRWxlbWVudCA9IGZ1bmN0aW9uIChfZWxlbWVudCkgewogICAgICAgICAgICAvLyBFbGVtZW50IGlzIHRoZSBleHRlcm5hbCB0cmlnZ2VyIGVsZW1lbnQKICAgICAgICAgICAgaWYgKF90aGlzLl9pc1RyaWdnZXJFbGVtZW50KF9lbGVtZW50KSkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9lbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEVsZW1lbnQgaGFzIGl0ZW0gdG9nZ2xlciBhdHRyaWJ1dGUKICAgICAgICAgICAgaWYgKF9lbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rdC1tZW51LXRyaWdnZXInKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9lbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEVsZW1lbnQgaGFzIGl0ZW0gRE9NIHJlZmVyZW5jZSBpbiBpdCdzIGRhdGEgc3RvcmFnZQogICAgICAgICAgICB2YXIgaXRlbUVsZW1lbnQgPSBEYXRhVXRpbC5nZXQoX2VsZW1lbnQsICdpdGVtJyk7CiAgICAgICAgICAgIGlmIChpdGVtRWxlbWVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1FbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEl0ZW0gaXMgcGFyZW50IG9mIGVsZW1lbnQKICAgICAgICAgICAgdmFyIGl0ZW0gPSBfZWxlbWVudC5jbG9zZXN0KCcubWVudS1pdGVtW2RhdGEta3QtbWVudS10cmlnZ2VyXScpOwogICAgICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRWxlbWVudCdzIHBhcmVudCBoYXMgaXRlbSBET00gcmVmZXJlbmNlIGluIGl0J3MgZGF0YSBzdG9yYWdlCiAgICAgICAgICAgIHZhciBzdWIgPSBfZWxlbWVudC5jbG9zZXN0KCcubWVudS1zdWInKTsKICAgICAgICAgICAgaWYgKHN1YikgewogICAgICAgICAgICAgICAgdmFyIHN1Ykl0ZW0gPSBEYXRhVXRpbC5nZXQoc3ViLCAnaXRlbScpOwogICAgICAgICAgICAgICAgaWYgKHN1Ykl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ViSXRlbTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gR2V0IGl0ZW0gcGFyZW50IGVsZW1lbnQKICAgICAgICB0aGlzLl9nZXRJdGVtUGFyZW50RWxlbWVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBzdWIgPSBpdGVtLmNsb3Nlc3QoJy5tZW51LXN1YicpOwogICAgICAgICAgICBpZiAoIXN1YikgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN1Ykl0ZW0gPSBEYXRhVXRpbC5nZXQoc3ViLCAnaXRlbScpOwogICAgICAgICAgICBpZiAoc3ViSXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN1Ykl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHBhcmVudEl0ZW0gPSBzdWIuY2xvc2VzdCgnLm1lbnUtaXRlbVtkYXRhLWt0LW1lbnUtdHJpZ2dlcl0nKTsKICAgICAgICAgICAgaWYgKHN1YiAmJiBwYXJlbnRJdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50SXRlbTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9OwogICAgICAgIC8vIEdldCBpdGVtIHBhcmVudCBlbGVtZW50cwogICAgICAgIHRoaXMuX2dldEl0ZW1QYXJlbnRFbGVtZW50cyA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107CiAgICAgICAgICAgIHZhciBwYXJlbnQ7CiAgICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGl0ZW07CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIHBhcmVudCA9IF90aGlzLl9nZXRJdGVtUGFyZW50RWxlbWVudChidWZmZXIpOwogICAgICAgICAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IHBhcmVudDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgfSB3aGlsZSAocGFyZW50ICE9PSBudWxsICYmIGkgPCAyMCk7CiAgICAgICAgICAgIGlmIChfdGhpcy50cmlnZ2VyRWxlbWVudCkgewogICAgICAgICAgICAgICAgcGFyZW50cy51bnNoaWZ0KF90aGlzLnRyaWdnZXJFbGVtZW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcGFyZW50czsKICAgICAgICB9OwogICAgICAgIC8vIFByZXBhcmUgcG9wcGVyIGNvbmZpZyBmb3IgZHJvcGRvd24oc2VlOiBodHRwczovL3BvcHBlci5qcy5vcmcvZG9jcy92Mi8pCiAgICAgICAgdGhpcy5fZ2V0RHJvcGRvd25Qb3BwZXJDb25maWcgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAvLyBQbGFjZW1lbnQKICAgICAgICAgICAgdmFyIHBsYWNlbWVudE9wdGlvbiA9IF90aGlzLl9nZXRJdGVtT3B0aW9uKGl0ZW0sICdwbGFjZW1lbnQnKTsKICAgICAgICAgICAgdmFyIHBsYWNlbWVudCA9ICdyaWdodCc7CiAgICAgICAgICAgIGlmIChwbGFjZW1lbnRPcHRpb24pIHsKICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9IHBsYWNlbWVudE9wdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBGbGlwCiAgICAgICAgICAgIC8vIGNvbnN0IGZsaXBWYWx1ZSA9IHRoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ2ZsaXAnKQogICAgICAgICAgICAvLyBjb25zdCBmbGlwID0gZmxpcFZhbHVlID8gZmxpcFZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJywnKSA6IFtdCiAgICAgICAgICAgIC8vIE9mZnNldAogICAgICAgICAgICB2YXIgb2Zmc2V0VmFsdWUgPSBfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAnb2Zmc2V0Jyk7CiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXRWYWx1ZSA/IG9mZnNldFZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJywnKSA6IFtdOwogICAgICAgICAgICAvLyBTdHJhdGVneQogICAgICAgICAgICB2YXIgc3RyYXRlZ3kgPSBfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAnb3ZlcmZsb3cnKSA9PT0gdHJ1ZSA/ICdhYnNvbHV0ZScgOiAnZml4ZWQnOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsCiAgICAgICAgICAgICAgICBzdHJhdGVneTogc3RyYXRlZ3ksCiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvZmZzZXQnLAogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ByZXZlbnRPdmVyZmxvdycKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2ZsaXAnLAogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHRCb3VuZGFyeTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhbGxiYWNrUGxhY2VtZW50czogZmxpcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBWYXJpYXRpb25zOiBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgICAgLy8gR2V0IGl0ZW0gY2hpbGQgZWxlbWVudAogICAgICAgIHRoaXMuX2dldEl0ZW1DaGlsZEVsZW1lbnQgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBpdGVtOwogICAgICAgICAgICB2YXIgc3ViSXRlbSA9IERhdGFVdGlsLmdldChpdGVtLCAnc3ViJyk7CiAgICAgICAgICAgIGlmIChzdWJJdGVtKSB7CiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHN1Ykl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7CiAgICAgICAgICAgICAgICAvL2VsZW1lbnQgPSBzZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuc2hvdy5tZW51LWl0ZW1bZGF0YS1rdC1tZW51LXRyaWdnZXJdJyk7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW1bZGF0YS1rdC1tZW51LXRyaWdnZXJdJyk7CiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH07CiAgICAgICAgLy8gR2V0IGl0ZW0gY2hpbGQgZWxlbWVudHMKICAgICAgICB0aGlzLl9nZXRJdGVtQ2hpbGRFbGVtZW50cyA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IFtdOwogICAgICAgICAgICB2YXIgY2hpbGQ7CiAgICAgICAgICAgIHZhciBpID0gMDsKICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGl0ZW07CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIGNoaWxkID0gX3RoaXMuX2dldEl0ZW1DaGlsZEVsZW1lbnQoYnVmZmVyKTsKICAgICAgICAgICAgICAgIGlmIChjaGlsZCkgewogICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpOwogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGNoaWxkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICB9IHdoaWxlIChjaGlsZCAhPT0gbnVsbCAmJiBpIDwgMjApOwogICAgICAgICAgICByZXR1cm4gY2hpbGRyZW47CiAgICAgICAgfTsKICAgICAgICAvLyBHZXQgaXRlbSBzdWIgZWxlbWVudAogICAgICAgIHRoaXMuX2dldEl0ZW1TdWJFbGVtZW50ID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKCFpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMuX2lzVHJpZ2dlckVsZW1lbnQoaXRlbSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbGVtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnbWVudS1zdWInKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoRGF0YVV0aWwuaGFzKGl0ZW0sICdzdWInKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIERhdGFVdGlsLmdldChpdGVtLCAnc3ViJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RWxlbWVudENoaWxkKGl0ZW0sICcubWVudS1zdWInKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5fZ2V0Q3NzID0gZnVuY3Rpb24gKGVsLCBzdHlsZVByb3ApIHsKICAgICAgICAgICAgdmFyIGRlZmF1bHRWaWV3ID0gKGVsLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpLmRlZmF1bHRWaWV3OwogICAgICAgICAgICBpZiAoIWRlZmF1bHRWaWV3KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gc2FuaXRpemUgcHJvcGVydHkgbmFtZSB0byBjc3Mgbm90YXRpb24KICAgICAgICAgICAgLy8gKGh5cGhlbiBzZXBhcmF0ZWQgd29yZHMgZWcuIGZvbnQtU2l6ZSkKICAgICAgICAgICAgc3R5bGVQcm9wID0gc3R5bGVQcm9wLnJlcGxhY2UoLyhbQS1aXSkvZywgJy0kMScpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlUHJvcCk7CiAgICAgICAgfTsKICAgICAgICAvLyBHZXQgaXRlbSBzdWIgdHlwZQogICAgICAgIHRoaXMuX2dldEl0ZW1TdWJUeXBlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgdmFyIHN1YiA9IF90aGlzLl9nZXRJdGVtU3ViRWxlbWVudChlbGVtZW50KTsKICAgICAgICAgICAgaWYgKHN1YiAmJiBwYXJzZUludChfdGhpcy5fZ2V0Q3NzKHN1YiwgJ3otaW5kZXgnKSkgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2Ryb3Bkb3duJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnYWNjb3JkaW9uJzsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gVGVzdCBpZiBpdGVtJ3Mgc3ViIGlzIHNob3duCiAgICAgICAgdGhpcy5faXNJdGVtU3ViU2hvd24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICB2YXIgc3ViID0gX3RoaXMuX2dldEl0ZW1TdWJFbGVtZW50KGl0ZW0pOwogICAgICAgICAgICBpZiAoc3ViKSB7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1TdWJUeXBlKGl0ZW0pID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Yi5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSAmJiBzdWIuaGFzQXR0cmlidXRlKCdkYXRhLXBvcHBlci1wbGFjZW1lbnQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwogICAgICAgIC8vIFRlc3QgaWYgaXRlbSBkcm9wZG93biBpcyBwZXJtYW5lbnQKICAgICAgICB0aGlzLl9pc0l0ZW1Ecm9wZG93blBlcm1hbmVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAncGVybWFuZW50JykgPT09IHRydWU7CiAgICAgICAgfTsKICAgICAgICAvLyBUZXN0IGlmIGl0ZW0ncyBwYXJlbnQgaXMgc2hvd24KICAgICAgICB0aGlzLl9pc0l0ZW1QYXJlbnRTaG93biA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50UGFyZW50cyhpdGVtLCAnLm1lbnUtaXRlbS5zaG93JykubGVuZ3RoID4gMDsKICAgICAgICB9OwogICAgICAgIC8vIFRlc3Qgb2YgaXQgaXMgaXRlbSBzdWIgZWxlbWVudAogICAgICAgIHRoaXMuX2lzSXRlbVN1YkVsZW1lbnQgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtc3ViJyk7CiAgICAgICAgfTsKICAgICAgICAvLyBUZXN0IGlmIGl0ZW0gaGFzIHN1YgogICAgICAgIHRoaXMuX2hhc0l0ZW1TdWIgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtaXRlbScpICYmIGl0ZW0uaGFzQXR0cmlidXRlKCdkYXRhLWt0LW1lbnUtdHJpZ2dlcicpOwogICAgICAgIH07CiAgICAgICAgLy8gR2V0IGxpbmsgZWxlbWVudAogICAgICAgIHRoaXMuX2dldEl0ZW1MaW5rRWxlbWVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50Q2hpbGQoaXRlbSwgJy5tZW51LWxpbmsnKTsKICAgICAgICB9OwogICAgICAgIC8vIEdldCB0b2dnbGUgZWxlbWVudAogICAgICAgIHRoaXMuX2dldEl0ZW1Ub2dnbGVFbGVtZW50ID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKF90aGlzLnRyaWdnZXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudHJpZ2dlckVsZW1lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9nZXRJdGVtTGlua0VsZW1lbnQoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICAvLyBTaG93IGl0ZW0gZHJvcGRvd24KICAgICAgICB0aGlzLl9zaG93RHJvcGRvd24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmRyb3Bkb3duLnNob3cnKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBIaWRlIGFsbCBjdXJyZW50bHkgc2hvd24gZHJvcGRvd25zIGV4Y2VwdCBjdXJyZW50IG9uZQogICAgICAgICAgICBNZW51Q29tcG9uZW50LmhpZGVEcm9wZG93bnMoaXRlbSk7CiAgICAgICAgICAgIC8vIGNvbnN0IHRvZ2dsZSA9IHRoaXMuX2lzVHJpZ2dlckVsZW1lbnQoaXRlbSkgPyBpdGVtIDogdGhpcy5fZ2V0SXRlbUxpbmtFbGVtZW50KGl0ZW0pOwogICAgICAgICAgICB2YXIgc3ViID0gX3RoaXMuX2dldEl0ZW1TdWJFbGVtZW50KGl0ZW0pOwogICAgICAgICAgICB2YXIgd2lkdGggPSBfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAnd2lkdGgnKTsKICAgICAgICAgICAgdmFyIGhlaWdodCA9IF90aGlzLl9nZXRJdGVtT3B0aW9uKGl0ZW0sICdoZWlnaHQnKTsKICAgICAgICAgICAgdmFyIHppbmRleCA9IF90aGlzLm9wdGlvbnMuZHJvcGRvd24uemluZGV4OwogICAgICAgICAgICB2YXIgcGFyZW50WmluZGV4ID0gZ2V0SGlnaGVzdFppbmRleChpdGVtKTsgLy8gdXBkYXRlCiAgICAgICAgICAgIC8vIEFwcGx5IGEgbmV3IHotaW5kZXggaWYgZHJvcGRvd24ncyB0b2dnbGUgZWxlbWVudCBvciBpdCdzIHBhcmVudCBoYXMgZ3JlYXRlciB6LWluZGV4IC8vIHVwZGF0ZQogICAgICAgICAgICBpZiAocGFyZW50WmluZGV4ICE9PSBudWxsICYmIHBhcmVudFppbmRleCA+PSB6aW5kZXgpIHsKICAgICAgICAgICAgICAgIHppbmRleCA9IHBhcmVudFppbmRleCArIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHppbmRleCkgewogICAgICAgICAgICAgICAgRWxlbWVudFN0eWxlVXRpbC5zZXQoc3ViLCAnei1pbmRleCcsIHppbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHdpZHRoKSB7CiAgICAgICAgICAgICAgICBFbGVtZW50U3R5bGVVdGlsLnNldChzdWIsICd3aWR0aCcsIHdpZHRoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICBFbGVtZW50U3R5bGVVdGlsLnNldChzdWIsICdoZWlnaHQnLCBoZWlnaHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLmluaXREcm9wZG93blBvcHBlcihpdGVtLCBzdWIpOwogICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdtZW51LWRyb3Bkb3duJyk7CiAgICAgICAgICAgIHN1Yi5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgc3ViIHRoZSB0aGUgcm9vdCBvZiB0aGUgbWVudQogICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ292ZXJmbG93JykgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3ViKTsKICAgICAgICAgICAgICAgIERhdGFVdGlsLnNldChpdGVtLCAnc3ViJywgc3ViKTsKICAgICAgICAgICAgICAgIERhdGFVdGlsLnNldChzdWIsICdpdGVtJywgaXRlbSk7CiAgICAgICAgICAgICAgICBEYXRhVXRpbC5zZXQoc3ViLCAnbWVudScsIF90aGlzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIERhdGFVdGlsLnNldChzdWIsICdpdGVtJywgaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmRyb3Bkb3duLnNob3duJyk7CiAgICAgICAgfTsKICAgICAgICAvLyBJbml0IGRyb3Bkb3duIHBvcHBlcihuZXcpCiAgICAgICAgdGhpcy5pbml0RHJvcGRvd25Qb3BwZXIgPSBmdW5jdGlvbiAoaXRlbSwgc3ViKSB7CiAgICAgICAgICAgIC8vIFNldHVwIHBvcHBlciBpbnN0YW5jZQogICAgICAgICAgICB2YXIgcmVmZXJlbmNlOwogICAgICAgICAgICB2YXIgYXR0YWNoID0gX3RoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ2F0dGFjaCcpOwogICAgICAgICAgICBpZiAoYXR0YWNoKSB7CiAgICAgICAgICAgICAgICBpZiAoYXR0YWNoID09PSAncGFyZW50JykgewogICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZSA9IGl0ZW0ucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXR0YWNoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJlZmVyZW5jZSA9IGl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlZmVyZW5jZSkgewogICAgICAgICAgICAgICAgdmFyIHBvcHBlciA9IGNyZWF0ZVBvcHBlcihyZWZlcmVuY2UsIHN1YiwgX3RoaXMuX2dldERyb3Bkb3duUG9wcGVyQ29uZmlnKGl0ZW0pKTsKICAgICAgICAgICAgICAgIERhdGFVdGlsLnNldChpdGVtLCAncG9wcGVyJywgcG9wcGVyKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gSGlkZSBpdGVtIGRyb3Bkb3duCiAgICAgICAgdGhpcy5faGlkZURyb3Bkb3duID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKEV2ZW50SGFuZGxlclV0aWwudHJpZ2dlcihfdGhpcy5lbGVtZW50LCAna3QubWVudS5kcm9wZG93bi5oaWRlJykgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN1YiA9IF90aGlzLl9nZXRJdGVtU3ViRWxlbWVudChpdGVtKTsKICAgICAgICAgICAgRWxlbWVudFN0eWxlVXRpbC5zZXQoc3ViLCAnei1pbmRleCcsICcnKTsKICAgICAgICAgICAgRWxlbWVudFN0eWxlVXRpbC5zZXQoc3ViLCAnd2lkdGgnLCAnJyk7CiAgICAgICAgICAgIEVsZW1lbnRTdHlsZVV0aWwuc2V0KHN1YiwgJ2hlaWdodCcsICcnKTsKICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnbWVudS1kcm9wZG93bicpOwogICAgICAgICAgICBzdWIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgICAgICAvLyBBcHBlbmQgdGhlIHN1YiBiYWNrIHRvIGl0J3MgcGFyZW50CiAgICAgICAgICAgIGlmIChfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAnb3ZlcmZsb3cnKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdtZW51LWl0ZW0nKSkgewogICAgICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoc3ViKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGluc2VydEFmdGVyRWxlbWVudChfdGhpcy5lbGVtZW50LCBpdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIERhdGFVdGlsLnJlbW92ZShpdGVtLCAnc3ViJyk7CiAgICAgICAgICAgICAgICBEYXRhVXRpbC5yZW1vdmUoc3ViLCAnaXRlbScpOwogICAgICAgICAgICAgICAgRGF0YVV0aWwucmVtb3ZlKHN1YiwgJ21lbnUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoRGF0YVV0aWwuaGFzKGl0ZW0sICdwb3BwZXInKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgRGF0YVV0aWwuZ2V0KGl0ZW0sICdwb3BwZXInKS5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICBEYXRhVXRpbC5yZW1vdmUoaXRlbSwgJ3BvcHBlcicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERlc3Ryb3kgcG9wcGVyKG5ldykKICAgICAgICAgICAgX3RoaXMuZGVzdHJveURyb3Bkb3duUG9wcGVyKGl0ZW0pOwogICAgICAgICAgICBFdmVudEhhbmRsZXJVdGlsLnRyaWdnZXIoX3RoaXMuZWxlbWVudCwgJ2t0Lm1lbnUuZHJvcGRvd24uaGlkZGVuJyk7CiAgICAgICAgfTsKICAgICAgICAvLyBEZXN0cm95IGRyb3Bkb3duIHBvcHBlcihuZXcpCiAgICAgICAgdGhpcy5kZXN0cm95RHJvcGRvd25Qb3BwZXIgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoRGF0YVV0aWwuaGFzKGl0ZW0sICdwb3BwZXInKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgRGF0YVV0aWwuZ2V0KGl0ZW0sICdwb3BwZXInKS5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICBEYXRhVXRpbC5yZW1vdmUoaXRlbSwgJ3BvcHBlcicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEV2ZW50SGFuZGxlclV0aWwudHJpZ2dlcihfdGhpcy5lbGVtZW50LCAna3QubWVudS5kcm9wZG93bi5oaWRkZW4nKTsKICAgICAgICB9OwogICAgICAgIHRoaXMuX3Nob3dBY2NvcmRpb24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmFjY29yZGlvbi5zaG93JykgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuYWNjb3JkaW9uLmV4cGFuZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9oaWRlQWNjb3JkaW9ucyhpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoRGF0YVV0aWwuaGFzKGl0ZW0sICdwb3BwZXInKSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgX3RoaXMuX2hpZGVEcm9wZG93bihpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2hvdmVyJyk7IC8vIHVwZGF0ZVdXCiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc2hvd2luZycpOwogICAgICAgICAgICB2YXIgc3ViRWxlbWVudCA9IF90aGlzLl9nZXRJdGVtU3ViRWxlbWVudChpdGVtKTsKICAgICAgICAgICAgaWYgKHN1YkVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBzdWJfMSA9IHN1YkVsZW1lbnQ7CiAgICAgICAgICAgICAgICBzbGlkZURvd24oc3ViXzEsIF90aGlzLm9wdGlvbnMuYWNjb3JkaW9uLnNsaWRlU3BlZWQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3dpbmcnKTsKICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICAgICAgICAgICAgICBzdWJfMS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgICAgICAgICAgRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmFjY29yZGlvbi5zaG93bicpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMuX2hpZGVBY2NvcmRpb24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmFjY29yZGlvbi5oaWRlJykgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHN1YiA9IF90aGlzLl9nZXRJdGVtU3ViRWxlbWVudChpdGVtKTsKICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdoaWRpbmcnKTsKICAgICAgICAgICAgaWYgKHN1YikgewogICAgICAgICAgICAgICAgc2xpZGVVcChzdWIsIF90aGlzLm9wdGlvbnMuYWNjb3JkaW9uLnNsaWRlU3BlZWQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGluZycpOwogICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgICAgICAgICAgICAgIHN1Yi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcicpOyAvLyB1cGRhdGUKICAgICAgICAgICAgICAgICAgICBFdmVudEhhbmRsZXJVdGlsLnRyaWdnZXIoX3RoaXMuZWxlbWVudCwgJ2t0Lm1lbnUuYWNjb3JkaW9uLmhpZGRlbicpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vIEhpZGUgYWxsIHNob3duIGFjY29yZGlvbnMgb2YgaXRlbQogICAgICAgIHRoaXMuX2hpZGVBY2NvcmRpb25zID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIGl0ZW1zVG9IaWRlID0gX3RoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvd1tkYXRhLWt0LW1lbnUtdHJpZ2dlcl0nKTsKICAgICAgICAgICAgaWYgKGl0ZW1zVG9IaWRlICYmIGl0ZW1zVG9IaWRlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBpdGVtc1RvSGlkZS5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVG9IaWRlID0gaXRlbXNUb0hpZGVbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9nZXRJdGVtU3ViVHlwZShpdGVtVG9IaWRlKSA9PT0gJ2FjY29yZGlvbicgJiYKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVRvSGlkZSAhPT0gaXRlbSAmJgogICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbnRhaW5zKGl0ZW1Ub0hpZGUpID09PSBmYWxzZSAmJgogICAgICAgICAgICAgICAgICAgICAgICBpdGVtVG9IaWRlLmNvbnRhaW5zKGl0ZW0pID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5faGlkZUFjY29yZGlvbihpdGVtVG9IaWRlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vIEV2ZW50IEhhbmRsZXJzCiAgICAgICAgLy8gUmVzZXQgaXRlbSBzdGF0ZSBjbGFzc2VzIGlmIGl0ZW0gc3ViIHR5cGUgY2hhbmdlZAogICAgICAgIHRoaXMuX3Jlc2V0ID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKF90aGlzLl9oYXNJdGVtU3ViKGl0ZW0pID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzdWIgPSBfdGhpcy5fZ2V0SXRlbVN1YkVsZW1lbnQoaXRlbSk7CiAgICAgICAgICAgIC8vIFJlc2V0IHN1YiBzdGF0ZSBpZiBzdWIgdHlwZSBpcyBjaGFuZ2VkIGR1cmluZyB0aGUgd2luZG93IHJlc2l6ZQogICAgICAgICAgICBpZiAoRGF0YVV0aWwuaGFzKGl0ZW0sICd0eXBlJykgJiYgRGF0YVV0aWwuZ2V0KGl0ZW0sICd0eXBlJykgIT09IF90aGlzLl9nZXRJdGVtU3ViVHlwZShpdGVtKSkgewogICAgICAgICAgICAgICAgLy8gdXBkYXRlZAogICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdob3ZlcicpOwogICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIGlmIChzdWIgJiYgc3ViLnJlbW92ZUNsYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgc3ViLnJlbW92ZUNsYXNzKHN1YiwgJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAvLyB1cGRhdGVkCiAgICAgICAgfTsKICAgICAgICAvLyBUT0RPOiBub3QgZG9uZQogICAgICAgIHRoaXMuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7IH07CiAgICAgICAgLy8gVXBkYXRlIGFsbCBpdGVtIHN0YXRlIGNsYXNzZXMgaWYgaXRlbSBzdWIgdHlwZSBjaGFuZ2VkCiAgICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaXRlbXMgPSBfdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW1bZGF0YS1rdC1tZW51LXRyaWdnZXJdJyk7CiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7IHJldHVybiBfdGhpcy5fcmVzZXQoZWwpOyB9KTsKICAgICAgICB9OwogICAgICAgIC8vIEhpZGUgaXRlbSBzdWIKICAgICAgICB0aGlzLl9oaWRlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgaWYgKCFpdGVtKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKF90aGlzLl9pc0l0ZW1TdWJTaG93bihpdGVtKSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1TdWJUeXBlKGl0ZW0pID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5faGlkZURyb3Bkb3duKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLl9nZXRJdGVtU3ViVHlwZShpdGVtKSA9PT0gJ2FjY29yZGlvbicpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9oaWRlQWNjb3JkaW9uKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvLyBTaG93IGl0ZW0gc3ViCiAgICAgICAgdGhpcy5fc2hvdyA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGlmICghaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfdGhpcy5faXNJdGVtU3ViU2hvd24oaXRlbSkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1TdWJUeXBlKGl0ZW0pID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fc2hvd0Ryb3Bkb3duKGl0ZW0pOyAvLyAvLyBzaG93IGN1cnJlbnQgZHJvcGRvd24KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5fZ2V0SXRlbVN1YlR5cGUoaXRlbSkgPT09ICdhY2NvcmRpb24nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fc2hvd0FjY29yZGlvbihpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSZW1lbWJlciBsYXN0IHN1Ym1lbnUgdHlwZQogICAgICAgICAgICBEYXRhVXRpbC5zZXQoaXRlbSwgJ3R5cGUnLCBfdGhpcy5fZ2V0SXRlbVN1YlR5cGUoaXRlbSkpOyAvLyB1cGRhdGVkCiAgICAgICAgfTsKICAgICAgICAvLyBUb2dnbGUgaXRlbSBzdWIKICAgICAgICB0aGlzLl90b2dnbGUgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpZiAoIWl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMuX2lzSXRlbVN1YlNob3duKGl0ZW0pID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5faGlkZShpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLl9zaG93KGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvLyBNb3VzZW91dCBoYW5kbGUKICAgICAgICB0aGlzLl9tb3VzZW91dCA9IGZ1bmN0aW9uIChlbGVtZW50LCBlKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3RoaXMuX2dldEl0ZW1FbGVtZW50KGVsZW1lbnQpOwogICAgICAgICAgICBpZiAoIWl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ3RyaWdnZXInKSAhPT0gJ2hvdmVyJykgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoRGF0YVV0aWwuZ2V0KGl0ZW0sICdob3ZlcicpID09PSAnMScpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5faGlkZShpdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX3RoaXMub3B0aW9ucy5kcm9wZG93bi5ob3ZlclRpbWVvdXQpOwogICAgICAgICAgICBEYXRhVXRpbC5zZXQoaXRlbSwgJ2hvdmVyJywgJzEnKTsKICAgICAgICAgICAgRGF0YVV0aWwuc2V0KGl0ZW0sICd0aW1lb3V0JywgdGltZW91dCk7CiAgICAgICAgfTsKICAgICAgICAvLyBNb3VzZW92ZXIgaGFuZGxlCiAgICAgICAgdGhpcy5fbW91c2VvdmVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBfdGhpcy5fZ2V0SXRlbUVsZW1lbnQoZWxlbWVudCk7CiAgICAgICAgICAgIGlmICghaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAndHJpZ2dlcicpICE9PSAnaG92ZXInKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKERhdGFVdGlsLmdldChpdGVtLCAnaG92ZXInKSA9PT0gJzEnKSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoRGF0YVV0aWwuZ2V0KGl0ZW0sICd0aW1lb3V0JykpOwogICAgICAgICAgICAgICAgRGF0YVV0aWwucmVtb3ZlKGl0ZW0sICdob3ZlcicpOwogICAgICAgICAgICAgICAgRGF0YVV0aWwucmVtb3ZlKGl0ZW0sICd0aW1lb3V0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMuX3Nob3coaXRlbSk7CiAgICAgICAgfTsKICAgICAgICAvLyBEaXNtaXNzIGhhbmRsZXIKICAgICAgICB0aGlzLl9kaXNtaXNzID0gZnVuY3Rpb24gKGVsZW1lbnQsIGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBfdGhpcy5fZ2V0SXRlbUVsZW1lbnQoZWxlbWVudCk7CiAgICAgICAgICAgIHZhciBpdGVtcyA9IF90aGlzLl9nZXRJdGVtQ2hpbGRFbGVtZW50cyhpdGVtKTsKICAgICAgICAgICAgLy9pZiAoIGl0ZW0gIT09IG51bGwgJiYgX2dldEl0ZW1PcHRpb24oaXRlbSwgJ3RyaWdnZXInKSA9PT0gJ2NsaWNrJyAmJiAgX2dldEl0ZW1TdWJUeXBlKGl0ZW0pID09PSAnZHJvcGRvd24nICkgewogICAgICAgICAgICB2YXIgaXRlbVN1YlR5cGUgPSBfdGhpcy5fZ2V0SXRlbVN1YlR5cGUoaXRlbSk7CiAgICAgICAgICAgIGlmIChpdGVtICE9PSBudWxsICYmIGl0ZW1TdWJUeXBlID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5faGlkZShpdGVtKTsgLy8gaGlkZSBpdGVtcyBkcm9wZG93bgogICAgICAgICAgICAgICAgLy8gSGlkZSBhbGwgY2hpbGQgZWxlbWVudHMgYXMgd2VsbAogICAgICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoIF9nZXRJdGVtT3B0aW9uKGl0ZW0sICd0cmlnZ2VyJykgPT09ICdjbGljaycgJiYgIF9nZXRJdGVtU3ViVHlwZShpdGVtKSA9PT0gJ2Ryb3Bkb3duJyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2ldICE9PSBudWxsICYmIF90aGlzLl9nZXRJdGVtU3ViVHlwZShpdGVtc1tpXSkgPT09ICdkcm9wZG93bicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9oaWRlKGl0ZW1zW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gTGluayBoYW5kbGVyCiAgICAgICAgdGhpcy5fbGluayA9IGZ1bmN0aW9uIChlbGVtZW50LCBlKSB7CiAgICAgICAgICAgIGlmIChFdmVudEhhbmRsZXJVdGlsLnRyaWdnZXIoX3RoaXMuZWxlbWVudCwgJ2t0Lm1lbnUubGluay5jbGljaycpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERpc21pc3MgYWxsIHNob3duIGRyb3Bkb3ducwogICAgICAgICAgICBNZW51Q29tcG9uZW50LmhpZGVEcm9wZG93bnModW5kZWZpbmVkKTsKICAgICAgICAgICAgRXZlbnRIYW5kbGVyVXRpbC50cmlnZ2VyKF90aGlzLmVsZW1lbnQsICdrdC5tZW51LmxpbmsuY2xpY2tlZCcpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5fY2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCwgZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3RoaXMuX2dldEl0ZW1FbGVtZW50KGVsZW1lbnQpOwogICAgICAgICAgICBpZiAoX3RoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ3RyaWdnZXInKSAhPT0gJ2NsaWNrJykgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfdGhpcy5fZ2V0SXRlbU9wdGlvbihpdGVtLCAndG9nZ2xlJykgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fc2hvdyhpdGVtKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLl90b2dnbGUoaXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gKiogUHVibGljIEFQSSAgKiogLy8KICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIHRoaXMuY2xpY2sgPSBmdW5jdGlvbiAoZWxlbWVudCwgZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX2NsaWNrKGVsZW1lbnQsIGUpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5saW5rID0gZnVuY3Rpb24gKGVsZW1lbnQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9saW5rKGVsZW1lbnQsIGUpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5kaXNtaXNzID0gZnVuY3Rpb24gKGVsZW1lbnQsIGUpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9kaXNtaXNzKGVsZW1lbnQsIGUpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5tb3VzZW92ZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX21vdXNlb3ZlcihlbGVtZW50LCBlKTsKICAgICAgICB9OwogICAgICAgIHRoaXMubW91c2VvdXQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX21vdXNlb3V0KGVsZW1lbnQsIGUpOwogICAgICAgIH07CiAgICAgICAgLy8gR2VuZXJhbCBNZXRob2RzCiAgICAgICAgdGhpcy5nZXRJdGVtVHJpZ2dlclR5cGUgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX2dldEl0ZW1PcHRpb24oaXRlbSwgJ3RyaWdnZXInKTsKICAgICAgICB9OwogICAgICAgIHRoaXMuZ2V0SXRlbVN1YlR5cGUgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX2dldEl0ZW1TdWJUeXBlKGVsZW1lbnQpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9zaG93KGl0ZW0pOwogICAgICAgIH07CiAgICAgICAgdGhpcy5oaWRlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9oaWRlKGl0ZW0pOwogICAgICAgIH07CiAgICAgICAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fcmVzZXQoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl91cGRhdGUoKTsKICAgICAgICB9OwogICAgICAgIHRoaXMuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVsZW1lbnQ7CiAgICAgICAgfTsKICAgICAgICB0aGlzLmdldEl0ZW1MaW5rRWxlbWVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fZ2V0SXRlbUxpbmtFbGVtZW50KGl0ZW0pOwogICAgICAgIH07CiAgICAgICAgdGhpcy5nZXRJdGVtVG9nZ2xlRWxlbWVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fZ2V0SXRlbVRvZ2dsZUVsZW1lbnQoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLmdldEl0ZW1TdWJFbGVtZW50ID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9nZXRJdGVtU3ViRWxlbWVudChpdGVtKTsKICAgICAgICB9OwogICAgICAgIHRoaXMuZ2V0SXRlbVBhcmVudEVsZW1lbnRzID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9nZXRJdGVtUGFyZW50RWxlbWVudHMoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICB0aGlzLmlzSXRlbVN1YlNob3duID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9pc0l0ZW1TdWJTaG93bihpdGVtKTsKICAgICAgICB9OwogICAgICAgIHRoaXMuaXNJdGVtUGFyZW50U2hvd24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMuX2lzSXRlbVBhcmVudFNob3duKGl0ZW0pOwogICAgICAgIH07CiAgICAgICAgdGhpcy5nZXRUcmlnZ2VyRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRyaWdnZXJFbGVtZW50OwogICAgICAgIH07CiAgICAgICAgdGhpcy5pc0l0ZW1Ecm9wZG93blBlcm1hbmVudCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5faXNJdGVtRHJvcGRvd25QZXJtYW5lbnQoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICAvLyBBY2NvcmRpb24gTW9kZSBNZXRob2RzCiAgICAgICAgdGhpcy5oaWRlQWNjb3JkaW9ucyA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5faGlkZUFjY29yZGlvbnMoaXRlbSk7CiAgICAgICAgfTsKICAgICAgICAvLyBFdmVudCBBUEkKICAgICAgICB0aGlzLm9uID0gZnVuY3Rpb24gKG5hbWUsIGhhbmRsZXIpIHsKICAgICAgICAgICAgcmV0dXJuIEV2ZW50SGFuZGxlclV0aWwub24oX3RoaXMuZWxlbWVudCwgbmFtZSwgaGFuZGxlcik7CiAgICAgICAgfTsKICAgICAgICB0aGlzLm9uZSA9IGZ1bmN0aW9uIChuYW1lLCBoYW5kbGVyKSB7CiAgICAgICAgICAgIHJldHVybiBFdmVudEhhbmRsZXJVdGlsLm9uZShfdGhpcy5lbGVtZW50LCBuYW1lLCBoYW5kbGVyKTsKICAgICAgICB9OwogICAgICAgIHRoaXMub2ZmID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIEV2ZW50SGFuZGxlclV0aWwub2ZmKF90aGlzLmVsZW1lbnQsIG5hbWUpOwogICAgICAgIH07CiAgICAgICAgdGhpcy5lbGVtZW50ID0gX2VsZW1lbnQ7CiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0TWVudU9wdGlvbnMsIG9wdGlvbnMpOwogICAgICAgIHRoaXMuaW5zdGFuY2VVaWQgPSBnZXRVbmlxdWVJZFdpdGhQcmVmaXgoJ21lbnUnKTsKICAgICAgICAvLyB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWt0LW1lbnUnLCAndHJ1ZScpCiAgICAgICAgdGhpcy5fc2V0VHJpZ2dlckVsZW1lbnQoKTsKICAgICAgICB0aGlzLl91cGRhdGUoKTsKICAgICAgICBEYXRhVXRpbC5zZXQodGhpcy5lbGVtZW50LCAnbWVudScsIHRoaXMpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLy8gcHVibGljIHN0YXRpYyBtZXRob2RzCiAgICAvLyBHZXQgS1RNZW51IGluc3RhbmNlIGJ5IGVsZW1lbnQKICAgIE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UgPSBmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgIC8vIEVsZW1lbnQgaGFzIG1lbnUgRE9NIHJlZmVyZW5jZSBpbiBpdCdzIERBVEEgc3RvcmFnZQogICAgICAgIHZhciBlbGVtZW50TWVudSA9IERhdGFVdGlsLmdldChlbGVtZW50LCAnbWVudScpOwogICAgICAgIGlmIChlbGVtZW50TWVudSkgewogICAgICAgICAgICByZXR1cm4gZWxlbWVudE1lbnU7CiAgICAgICAgfQogICAgICAgIC8vIEVsZW1lbnQgaGFzIC5tZW51IHBhcmVudAogICAgICAgIHZhciBtZW51ID0gZWxlbWVudC5jbG9zZXN0KCcubWVudScpOwogICAgICAgIGlmIChtZW51KSB7CiAgICAgICAgICAgIHZhciBtZW51RGF0YSA9IERhdGFVdGlsLmdldChtZW51LCAnbWVudScpOwogICAgICAgICAgICBpZiAobWVudURhdGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtZW51RGF0YTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBFbGVtZW50IGhhcyBhIHBhcmVudCB3aXRoIERPTSByZWZlcmVuY2UgdG8gLm1lbnUgaW4gaXQncyBEQVRBIHN0b3JhZ2UKICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnUtbGluaycpKSB7CiAgICAgICAgICAgIHZhciBzdWIgPSBlbGVtZW50LmNsb3Nlc3QoJy5tZW51LXN1YicpOwogICAgICAgICAgICBpZiAoc3ViKSB7CiAgICAgICAgICAgICAgICB2YXIgc3ViTWVudSA9IERhdGFVdGlsLmdldChzdWIsICdtZW51Jyk7CiAgICAgICAgICAgICAgICBpZiAoc3ViTWVudSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJNZW51OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfTsKICAgIC8vIEhpZGUgYWxsIGRyb3Bkb3ducyBhbmQgc2tpcCBvbmUgaWYgcHJvdmlkZWQKICAgIE1lbnVDb21wb25lbnQuaGlkZURyb3Bkb3ducyA9IGZ1bmN0aW9uIChza2lwKSB7CiAgICAgICAgdmFyIGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNob3cubWVudS1kcm9wZG93bltkYXRhLWt0LW1lbnUtdHJpZ2dlcl0nKTsKICAgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNbaV07CiAgICAgICAgICAgICAgICB2YXIgbWVudSA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UoaXRlbSk7CiAgICAgICAgICAgICAgICBpZiAobWVudSAmJiBtZW51LmdldEl0ZW1TdWJUeXBlKGl0ZW0pID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnUuZ2V0SXRlbVN1YkVsZW1lbnQoaXRlbSkuY29udGFpbnMoc2tpcCkgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbnRhaW5zKHNraXApID09PSBmYWxzZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSAhPT0gc2tpcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5oaWRlKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtZW51LmhpZGUoaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIE1lbnVDb21wb25lbnQudXBkYXRlRHJvcGRvd25zID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG93Lm1lbnUtZHJvcGRvd25bZGF0YS1rdC1tZW51LXRyaWdnZXJdJyk7CiAgICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldOwogICAgICAgICAgICAgICAgaWYgKERhdGFVdGlsLmhhcyhpdGVtLCAncG9wcGVyJykpIHsKICAgICAgICAgICAgICAgICAgICBEYXRhVXRpbC5nZXQoaXRlbSwgJ3BvcHBlcicpLmZvcmNlVXBkYXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgLy8gR2xvYmFsIGhhbmRsZXJzCiAgICBNZW51Q29tcG9uZW50LmNyZWF0ZUluc3RhbmNlcyA9IGZ1bmN0aW9uIChzZWxlY3RvcikgewogICAgICAgIC8vIEluaXRpYWxpemUgbWVudXMKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSBlbDsKICAgICAgICAgICAgdmFyIG1lbnVJbnN0YW5jZSA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UobWVudUl0ZW0pOwogICAgICAgICAgICBpZiAoIW1lbnVJbnN0YW5jZSkgewogICAgICAgICAgICAgICAgbWVudUluc3RhbmNlID0gbmV3IE1lbnVDb21wb25lbnQoZWwsIGRlZmF1bHRNZW51T3B0aW9ucyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07CiAgICBNZW51Q29tcG9uZW50LmluaXRHbG9iYWxIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBEcm9wZG93biBoYW5kbGVyCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbWVudUl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNob3cubWVudS1kcm9wZG93bltkYXRhLWt0LW1lbnUtdHJpZ2dlcl0nKTsKICAgICAgICAgICAgaWYgKG1lbnVJdGVtcyAmJiBtZW51SXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZW51SXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IG1lbnVJdGVtc1tpXTsKICAgICAgICAgICAgICAgICAgICB2YXIgbWVudU9iaiA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UoaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnVPYmogJiYgbWVudU9iai5nZXRJdGVtU3ViVHlwZShpdGVtKSA9PT0gJ2Ryb3Bkb3duJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW51ID0gbWVudU9iai5nZXRFbGVtZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWIgPSBtZW51T2JqLmdldEl0ZW1TdWJFbGVtZW50KGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gZS50YXJnZXQgfHwgaXRlbS5jb250YWlucyhlLnRhcmdldCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWIgJiYgKHN1YiA9PT0gZS50YXJnZXQgfHwgc3ViLmNvbnRhaW5zKGUudGFyZ2V0KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVPYmouaGlkZShpdGVtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyBTdWIgdG9nZ2xlIGhhbmRsZXIKICAgICAgICBET01FdmVudEhhbmRsZXJVdGlsLm9uKGRvY3VtZW50LmJvZHksICcubWVudS1pdGVtW2RhdGEta3QtbWVudS10cmlnZ2VyXSA+IC5tZW51LWxpbmssIFtkYXRhLWt0LW1lbnUtdHJpZ2dlcl06bm90KC5tZW51LWl0ZW0pOm5vdChbZGF0YS1rdC1tZW51LXRyaWdnZXI9ImF1dG8iXSknLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbWVudSA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UodGhpcyk7CiAgICAgICAgICAgIGlmIChtZW51KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWVudS5jbGljayh0aGlzLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIC8vIExpbmsgaGFuZGxlcgogICAgICAgIERPTUV2ZW50SGFuZGxlclV0aWwub24oZG9jdW1lbnQuYm9keSwgJy5tZW51LWl0ZW06bm90KFtkYXRhLWt0LW1lbnUtdHJpZ2dlcl0pID4gLm1lbnUtbGluaycsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHZhciBtZW51ID0gTWVudUNvbXBvbmVudC5nZXRJbnN0YW5jZSh0aGlzKTsKICAgICAgICAgICAgaWYgKG1lbnUgJiYgbWVudS5saW5rKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWVudS5saW5rKHRoaXMsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gRGlzbWlzcyBoYW5kbGVyCiAgICAgICAgRE9NRXZlbnRIYW5kbGVyVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnW2RhdGEta3QtbWVudS1kaXNtaXNzPSJ0cnVlIl0nLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbWVudSA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UodGhpcyk7CiAgICAgICAgICAgIGlmIChtZW51KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWVudS5kaXNtaXNzKHRoaXMsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gTW91c2VvdmVyIGhhbmRsZXIKICAgICAgICBET01FdmVudEhhbmRsZXJVdGlsLm9uKGRvY3VtZW50LmJvZHksICdbZGF0YS1rdC1tZW51LXRyaWdnZXJdLCAubWVudS1zdWInLCAnbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIG1lbnUgPSBNZW51Q29tcG9uZW50LmdldEluc3RhbmNlKHRoaXMpOwogICAgICAgICAgICBpZiAobWVudSAmJiBtZW51LmdldEl0ZW1TdWJUeXBlKHRoaXMpID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWVudS5tb3VzZW92ZXIodGhpcywgZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyBNb3VzZW91dCBoYW5kbGVyCiAgICAgICAgRE9NRXZlbnRIYW5kbGVyVXRpbC5vbihkb2N1bWVudC5ib2R5LCAnW2RhdGEta3QtbWVudS10cmlnZ2VyXSwgLm1lbnUtc3ViJywgJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIG1lbnUgPSBNZW51Q29tcG9uZW50LmdldEluc3RhbmNlKHRoaXMpOwogICAgICAgICAgICBpZiAobWVudSAmJiBtZW51LmdldEl0ZW1TdWJUeXBlKHRoaXMpID09PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWVudS5tb3VzZW91dCh0aGlzLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIFJlc2l6ZSBoYW5kbGVyCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRpbWVyOwogICAgICAgICAgICB0aHJvdHRsZSh0aW1lciwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gTG9jYXRlIGFuZCB1cGRhdGUgRHJhd2VyIGluc3RhbmNlcyBvbiB3aW5kb3cgcmVzaXplCiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1rdC1tZW51PSJ0cnVlIl0nKTsKICAgICAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnUgPSBNZW51Q29tcG9uZW50LmdldEluc3RhbmNlKGVsKTsKICAgICAgICAgICAgICAgICAgICBpZiAobWVudSkgewogICAgICAgICAgICAgICAgICAgICAgICBtZW51LnVwZGF0ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCAyMDApOwogICAgICAgIH0pOwogICAgfTsKICAgIE1lbnVDb21wb25lbnQuYm9vdHN0cmFwID0gZnVuY3Rpb24gKCkgewogICAgICAgIE1lbnVDb21wb25lbnQuaW5pdEdsb2JhbEhhbmRsZXJzKCk7CiAgICAgICAgTWVudUNvbXBvbmVudC5jcmVhdGVJbnN0YW5jZXMoJ1tkYXRhLWt0LW1lbnU9InRydWUiXScpOwogICAgfTsKICAgIE1lbnVDb21wb25lbnQucmVpbml0aWFsaXphdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBNZW51Q29tcG9uZW50LmNyZWF0ZUluc3RhbmNlcygnW2RhdGEta3QtbWVudT0idHJ1ZSJdJyk7CiAgICB9OwogICAgTWVudUNvbXBvbmVudC5jcmVhdGVJbnNhbmNlID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0gZGVmYXVsdE1lbnVPcHRpb25zOyB9CiAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwogICAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBpdGVtID0gZWxlbWVudDsKICAgICAgICB2YXIgbWVudSA9IE1lbnVDb21wb25lbnQuZ2V0SW5zdGFuY2UoaXRlbSk7CiAgICAgICAgaWYgKCFtZW51KSB7CiAgICAgICAgICAgIG1lbnUgPSBuZXcgTWVudUNvbXBvbmVudChpdGVtLCBvcHRpb25zKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1lbnU7CiAgICB9OwogICAgcmV0dXJuIE1lbnVDb21wb25lbnQ7Cn0oKSk7CmV4cG9ydCB7IE1lbnVDb21wb25lbnQsIGRlZmF1bHRNZW51T3B0aW9ucyB9Owo="},{"version":3,"file":"/home/valter/work/demo7/src/assets/ts/components/MenuComponent.ts","sourceRoot":"","sources":["/home/valter/work/demo7/node_modules/eslint-loader/index.js??ref--13-0!/home/valter/work/demo7/src/assets/ts/components/MenuComponent.ts"],"names":[],"mappings":"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","sourcesContent":["import {createPopper, VirtualElement} from '@popperjs/core'\r\nimport {\r\n  getElementChild,\r\n  getElementParents,\r\n  getAttributeValueByBreakpoint,\r\n  getUniqueIdWithPrefix,\r\n  DataUtil,\r\n  ElementStyleUtil,\r\n  EventHandlerUtil,\r\n  insertAfterElement,\r\n  slideUp,\r\n  slideDown,\r\n  DOMEventHandlerUtil,\r\n  throttle,\r\n  getHighestZindex,\r\n} from '../_utils/index'\r\n\r\nexport interface MenuOptions {\r\n  dropdown: {\r\n    hoverTimeout: number\r\n    zindex: number\r\n  }\r\n  accordion: {\r\n    slideSpeed: number\r\n    expand: boolean\r\n  }\r\n}\r\n\r\nconst defaultMenuOptions: MenuOptions = {\r\n  dropdown: {\r\n    hoverTimeout: 200,\r\n    zindex: 105,\r\n  },\r\n  accordion: {\r\n    slideSpeed: 250,\r\n    expand: false,\r\n  },\r\n}\r\n\r\ntype PopperPlacement =\r\n  | 'right'\r\n  | 'auto'\r\n  | 'auto-start'\r\n  | 'auto-end'\r\n  | 'top'\r\n  | 'bottom'\r\n  | 'left'\r\n  | 'top-start'\r\n  | 'top-end'\r\n  | 'bottom-start'\r\n  | 'bottom-end'\r\n  | 'right-start'\r\n  | 'right-end'\r\n  | 'left-start'\r\n  | 'left-end'\r\n  | undefined\r\n\r\nclass MenuComponent {\r\n  element: HTMLElement\r\n  options: MenuOptions\r\n  instanceUid: string\r\n  triggerElement: HTMLElement | null = null\r\n\r\n  constructor(_element: HTMLElement, options: MenuOptions) {\r\n    this.element = _element\r\n    this.options = Object.assign(defaultMenuOptions, options)\r\n    this.instanceUid = getUniqueIdWithPrefix('menu')\r\n    // this.element.setAttribute('data-kt-menu', 'true')\r\n    this._setTriggerElement()\r\n    this._update()\r\n    DataUtil.set(this.element, 'menu', this)\r\n    return this\r\n  }\r\n\r\n  // Set external trigger element\r\n  private _setTriggerElement = () => {\r\n    const target = document.querySelector(\r\n      `[data-kt-menu-target=\"#${this.element.getAttribute('id')}\"`\r\n    )\r\n\r\n    if (target) {\r\n      this.triggerElement = target as HTMLElement\r\n    } else if (this.element.closest('[data-kt-menu-trigger]')) {\r\n      this.triggerElement = this.element.closest('[data-kt-menu-trigger]') as HTMLElement\r\n    } else if (\r\n      this.element.parentNode &&\r\n      getElementChild(this.element.parentNode as HTMLElement, '[data-kt-menu-trigger]')\r\n    ) {\r\n      const child = getElementChild(\r\n        this.element.parentNode as HTMLElement,\r\n        '[data-kt-menu-trigger]'\r\n      )\r\n      if (child) {\r\n        this.triggerElement = child\r\n      }\r\n    }\r\n\r\n    if (this.triggerElement) {\r\n      DataUtil.set(this.triggerElement, 'menu', this)\r\n    }\r\n  }\r\n\r\n  // Test if menu has external trigger element\r\n  private _isTriggerElement = (item: HTMLElement) => {\r\n    return this.triggerElement === item\r\n  }\r\n\r\n  // Get item option(through html attributes)\r\n  private _getItemOption = (item: HTMLElement, name: string) => {\r\n    let value: string | JSON | null | boolean = null\r\n    if (item && item.hasAttribute('data-kt-menu-' + name)) {\r\n      const attr = item.getAttribute('data-kt-menu-' + name) || ''\r\n      value = getAttributeValueByBreakpoint(attr)\r\n      if (value !== null && String(value) === 'true') {\r\n        value = true\r\n      } else if (value !== null && String(value) === 'false') {\r\n        value = false\r\n      }\r\n    }\r\n    return value\r\n  }\r\n\r\n  // Get item element\r\n  private _getItemElement = (_element: HTMLElement) => {\r\n    // Element is the external trigger element\r\n    if (this._isTriggerElement(_element)) {\r\n      return _element\r\n    }\r\n\r\n    // Element has item toggler attribute\r\n    if (_element.hasAttribute('data-kt-menu-trigger')) {\r\n      return _element\r\n    }\r\n\r\n    // Element has item DOM reference in it's data storage\r\n    const itemElement = DataUtil.get(_element, 'item')\r\n    if (itemElement) {\r\n      return itemElement\r\n    }\r\n\r\n    // Item is parent of element\r\n    const item = _element.closest('.menu-item[data-kt-menu-trigger]')\r\n    if (item) {\r\n      return item\r\n    }\r\n\r\n    // Element's parent has item DOM reference in it's data storage\r\n    const sub = _element.closest('.menu-sub')\r\n    if (sub) {\r\n      const subItem = DataUtil.get(sub as HTMLElement, 'item')\r\n      if (subItem) {\r\n        return subItem\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get item parent element\r\n  private _getItemParentElement = (item: HTMLElement) => {\r\n    const sub = item.closest('.menu-sub')\r\n    if (!sub) {\r\n      return null\r\n    }\r\n\r\n    const subItem = DataUtil.get(sub as HTMLElement, 'item')\r\n    if (subItem) {\r\n      return subItem\r\n    }\r\n\r\n    const parentItem = sub.closest('.menu-item[data-kt-menu-trigger]')\r\n    if (sub && parentItem) {\r\n      return parentItem\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // Get item parent elements\r\n  private _getItemParentElements = (item: HTMLElement) => {\r\n    const parents:Array<Element> = []\r\n    let parent:Element\r\n    let i = 0\r\n    let buffer:HTMLElement = item\r\n\r\n    do {\r\n      parent = this._getItemParentElement(buffer)\r\n      if (parent) {\r\n        parents.push(parent)\r\n        buffer = parent as HTMLElement\r\n      }\r\n\r\n      i++\r\n    } while (parent !== null && i < 20)\r\n\r\n    if (this.triggerElement) {\r\n      parents.unshift(this.triggerElement)\r\n    }\r\n\r\n    return parents\r\n  }\r\n\r\n  // Prepare popper config for dropdown(see: https://popper.js.org/docs/v2/)\r\n  private _getDropdownPopperConfig = (item: HTMLElement) => {\r\n    // Placement\r\n    const placementOption = this._getItemOption(item, 'placement')\r\n    let placement: PopperPlacement = 'right'\r\n    if (placementOption) {\r\n      placement = placementOption as PopperPlacement\r\n    }\r\n\r\n    // Flip\r\n    // const flipValue = this._getItemOption(item, 'flip')\r\n    // const flip = flipValue ? flipValue.toString().split(',') : []\r\n\r\n    // Offset\r\n    const offsetValue = this._getItemOption(item, 'offset')\r\n    const offset = offsetValue ? offsetValue.toString().split(',') : []\r\n\r\n    // Strategy\r\n    const strategy: 'absolute' | 'fixed' | undefined =\r\n      this._getItemOption(item, 'overflow') === true ? 'absolute' : 'fixed'\r\n\r\n    return {\r\n      placement: placement,\r\n      strategy: strategy,\r\n      modifiers: [\r\n        {\r\n          name: 'offset',\r\n          options: {\r\n            offset: offset,\r\n          },\r\n        },\r\n        {\r\n          name: 'preventOverflow'\r\n        },\r\n        {\r\n          name: 'flip',\r\n          options: {\r\n            // altBoundary: true,\r\n            // fallbackPlacements: flip,\r\n            flipVariations: false\r\n          },\r\n        },\r\n      ],\r\n    }\r\n  }\r\n\r\n  // Get item child element\r\n  private _getItemChildElement = (item: HTMLElement) => {\r\n    let selector = item\r\n\r\n    const subItem = DataUtil.get(item, 'sub')\r\n    if (subItem) {\r\n      selector = subItem\r\n    }\r\n\r\n    if (selector) {\r\n      //element = selector.querySelector('.show.menu-item[data-kt-menu-trigger]');\r\n      const element = selector.querySelector('.menu-item[data-kt-menu-trigger]')\r\n      if (element) {\r\n        return element\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  // Get item child elements\r\n  private _getItemChildElements = (item: HTMLElement) => {\r\n    const children: Array<Element> = []\r\n    let child:Element | null\r\n    let i = 0\r\n    let buffer = item\r\n    do {\r\n      child = this._getItemChildElement(buffer)\r\n      if (child) {\r\n        children.push(child)\r\n        buffer = child as HTMLElement\r\n      }\r\n\r\n      i++\r\n    } while (child !== null && i < 20)\r\n\r\n    return children\r\n  }\r\n\r\n  // Get item sub element\r\n  private _getItemSubElement = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return null\r\n    }\r\n\r\n    if (this._isTriggerElement(item)) {\r\n      return this.element\r\n    }\r\n\r\n    if (item.classList.contains('menu-sub')) {\r\n      return item\r\n    } else if (DataUtil.has(item, 'sub')) {\r\n      return DataUtil.get(item, 'sub')\r\n    } else {\r\n      return getElementChild(item, '.menu-sub')\r\n    }\r\n  }\r\n\r\n  private _getCss = (el: HTMLElement, styleProp: string) => {\r\n    const defaultView = (el.ownerDocument || document).defaultView\r\n    if (!defaultView) {\r\n      return ''\r\n    }\r\n\r\n    // sanitize property name to css notation\r\n    // (hyphen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\r\n    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp)\r\n  }\r\n\r\n  // Get item sub type\r\n  private _getItemSubType = (element: HTMLElement) => {\r\n    const sub = this._getItemSubElement(element)\r\n    if (sub && parseInt(this._getCss(sub, 'z-index')) > 0) {\r\n      return 'dropdown'\r\n    } else {\r\n      return 'accordion'\r\n    }\r\n  }\r\n\r\n  // Test if item's sub is shown\r\n  private _isItemSubShown = (item: HTMLElement) => {\r\n    let sub = this._getItemSubElement(item)\r\n    if (sub) {\r\n      if (this._getItemSubType(item) === 'dropdown') {\r\n        return sub.classList.contains('show') && sub.hasAttribute('data-popper-placement')\r\n      } else {\r\n        return item.classList.contains('show')\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  // Test if item dropdown is permanent\r\n  private _isItemDropdownPermanent = (item: HTMLElement) => {\r\n    return this._getItemOption(item, 'permanent') === true\r\n  }\r\n\r\n  // Test if item's parent is shown\r\n  private _isItemParentShown = (item: HTMLElement) => {\r\n    return getElementParents(item, '.menu-item.show').length > 0\r\n  }\r\n\r\n  // Test of it is item sub element\r\n  private _isItemSubElement = (item: HTMLElement) => {\r\n    return item.classList.contains('menu-sub')\r\n  }\r\n\r\n  // Test if item has sub\r\n  private _hasItemSub = (item: HTMLElement) => {\r\n    return item.classList.contains('menu-item') && item.hasAttribute('data-kt-menu-trigger')\r\n  }\r\n\r\n  // Get link element\r\n  private _getItemLinkElement = (item: HTMLElement) => {\r\n    return getElementChild(item, '.menu-link')\r\n  }\r\n\r\n  // Get toggle element\r\n  private _getItemToggleElement = (item: HTMLElement) => {\r\n    if (this.triggerElement) {\r\n      return this.triggerElement\r\n    }\r\n\r\n    return this._getItemLinkElement(item)\r\n  }\r\n\r\n  // Show item dropdown\r\n  private _showDropdown = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.show') === false) {\r\n      return\r\n    }\r\n\r\n    // Hide all currently shown dropdowns except current one\r\n    MenuComponent.hideDropdowns(item)\r\n\r\n    // const toggle = this._isTriggerElement(item) ? item : this._getItemLinkElement(item);\r\n    const sub = this._getItemSubElement(item)\r\n    const width = this._getItemOption(item, 'width')\r\n    const height = this._getItemOption(item, 'height')\r\n\r\n    let zindex = this.options.dropdown.zindex\r\n    const parentZindex = getHighestZindex(item) // update\r\n    // Apply a new z-index if dropdown's toggle element or it's parent has greater z-index // update\r\n    if (parentZindex !== null && parentZindex >= zindex) {\r\n      zindex = parentZindex + 1\r\n    }\r\n\r\n    if (zindex) {\r\n      ElementStyleUtil.set(sub, 'z-index', zindex)\r\n    }\r\n\r\n    if (width) {\r\n      ElementStyleUtil.set(sub, 'width', width)\r\n    }\r\n\r\n    if (height) {\r\n      ElementStyleUtil.set(sub, 'height', height)\r\n    }\r\n\r\n    this.initDropdownPopper(item, sub)\r\n\r\n    item.classList.add('show')\r\n    item.classList.add('menu-dropdown')\r\n    sub.classList.add('show')\r\n\r\n    // Append the sub the the root of the menu\r\n    if (this._getItemOption(item, 'overflow') === true) {\r\n      document.body.appendChild(sub)\r\n      DataUtil.set(item, 'sub', sub)\r\n      DataUtil.set(sub, 'item', item)\r\n      DataUtil.set(sub, 'menu', this)\r\n    } else {\r\n      DataUtil.set(sub, 'item', item)\r\n    }\r\n\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.shown')\r\n  }\r\n\r\n  // Init dropdown popper(new)\r\n  private initDropdownPopper = (item: HTMLElement, sub: HTMLElement) => {\r\n    // Setup popper instance\r\n    let reference\r\n    const attach = this._getItemOption(item, 'attach') as string\r\n\r\n    if (attach) {\r\n      if (attach === 'parent') {\r\n        reference = item.parentNode\r\n      } else {\r\n        reference = document.querySelector(attach)\r\n      }\r\n    } else {\r\n      reference = item\r\n    }\r\n\r\n    if (reference) {\r\n      const popper = createPopper(\r\n        reference as Element | VirtualElement,\r\n        sub,\r\n        this._getDropdownPopperConfig(item)\r\n      )\r\n      DataUtil.set(item, 'popper', popper)\r\n    }\r\n  }\r\n\r\n  // Hide item dropdown\r\n  private _hideDropdown = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hide') === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n    ElementStyleUtil.set(sub, 'z-index', '')\r\n    ElementStyleUtil.set(sub, 'width', '')\r\n    ElementStyleUtil.set(sub, 'height', '')\r\n    item.classList.remove('show')\r\n    item.classList.remove('menu-dropdown')\r\n    sub.classList.remove('show')\r\n\r\n    // Append the sub back to it's parent\r\n    if (this._getItemOption(item, 'overflow') === true) {\r\n      if (item.classList.contains('menu-item')) {\r\n        item.appendChild(sub)\r\n      } else {\r\n        insertAfterElement(this.element, item)\r\n      }\r\n\r\n      DataUtil.remove(item, 'sub')\r\n      DataUtil.remove(sub, 'item')\r\n      DataUtil.remove(sub, 'menu')\r\n    }\r\n\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      DataUtil.get(item, 'popper').destroy()\r\n      DataUtil.remove(item, 'popper')\r\n    }\r\n\r\n    // Destroy popper(new)\r\n    this.destroyDropdownPopper(item)\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hidden')\r\n  }\r\n\r\n  // Destroy dropdown popper(new)\r\n  private destroyDropdownPopper = (item: HTMLElement) => {\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      DataUtil.get(item, 'popper').destroy()\r\n      DataUtil.remove(item, 'popper')\r\n    }\r\n\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.dropdown.hidden')\r\n  }\r\n\r\n  private _showAccordion = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.show') === false) {\r\n      return\r\n    }\r\n\r\n    if (this.options.accordion.expand === false) {\r\n      this._hideAccordions(item)\r\n    }\r\n\r\n    if (DataUtil.has(item, 'popper') === true) {\r\n      this._hideDropdown(item)\r\n    }\r\n\r\n    item.classList.add('hover') // updateWW\r\n    item.classList.add('showing')\r\n\r\n    const subElement = this._getItemSubElement(item)\r\n    if (subElement) {\r\n      const sub = subElement as HTMLElement\r\n      slideDown(sub, this.options.accordion.slideSpeed, () => {\r\n        item.classList.remove('showing')\r\n        item.classList.add('show')\r\n        sub.classList.add('show')\r\n        EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.shown')\r\n      })\r\n    }\r\n  }\r\n\r\n  private _hideAccordion = (item: HTMLElement) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.hide') === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n    item.classList.add('hiding')\r\n\r\n    if (sub) {\r\n      slideUp(sub, this.options.accordion.slideSpeed, () => {\r\n        item.classList.remove('hiding')\r\n        item.classList.remove('show')\r\n        sub.classList.remove('show')\r\n        item.classList.remove('hover') // update\r\n        EventHandlerUtil.trigger(this.element, 'kt.menu.accordion.hidden')\r\n      })\r\n    }\r\n  }\r\n\r\n  // Hide all shown accordions of item\r\n  private _hideAccordions = (item: HTMLElement) => {\r\n    const itemsToHide = this.element.querySelectorAll('.show[data-kt-menu-trigger]')\r\n    if (itemsToHide && itemsToHide.length > 0) {\r\n      for (var i = 0, len = itemsToHide.length; i < len; i++) {\r\n        const itemToHide = itemsToHide[i] as HTMLElement\r\n\r\n        if (\r\n          this._getItemSubType(itemToHide) === 'accordion' &&\r\n          itemToHide !== item &&\r\n          item.contains(itemToHide) === false &&\r\n          itemToHide.contains(item) === false\r\n        ) {\r\n          this._hideAccordion(itemToHide)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Event Handlers\r\n  // Reset item state classes if item sub type changed\r\n  private _reset = (item: HTMLElement) => {\r\n    if (this._hasItemSub(item) === false) {\r\n      return\r\n    }\r\n\r\n    const sub = this._getItemSubElement(item)\r\n\r\n    // Reset sub state if sub type is changed during the window resize\r\n    if (DataUtil.has(item, 'type') && DataUtil.get(item, 'type') !== this._getItemSubType(item)) {\r\n      // updated\r\n      item.classList.remove('hover')\r\n      item.classList.remove('show')\r\n      item.classList.remove('show')\r\n      if (sub && sub.removeClass) {\r\n        sub.removeClass(sub, 'show')\r\n      }\r\n    } // updated\r\n  }\r\n\r\n  // TODO: not done\r\n  private _destroy = () => {}\r\n\r\n  // Update all item state classes if item sub type changed\r\n  private _update = () => {\r\n    const items = this.element.querySelectorAll('.menu-item[data-kt-menu-trigger]')\r\n    items.forEach((el) => this._reset(el as HTMLElement))\r\n  }\r\n\r\n  // Hide item sub\r\n  private _hide = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === false) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemSubType(item) === 'dropdown') {\r\n      this._hideDropdown(item)\r\n    } else if (this._getItemSubType(item) === 'accordion') {\r\n      this._hideAccordion(item)\r\n    }\r\n  }\r\n\r\n  // Show item sub\r\n  private _show = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === true) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemSubType(item) === 'dropdown') {\r\n      this._showDropdown(item) // // show current dropdown\r\n    } else if (this._getItemSubType(item) === 'accordion') {\r\n      this._showAccordion(item)\r\n    }\r\n\r\n    // Remember last submenu type\r\n\r\n    DataUtil.set(item, 'type', this._getItemSubType(item)) // updated\r\n  }\r\n\r\n  // Toggle item sub\r\n  private _toggle = (item: HTMLElement) => {\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._isItemSubShown(item) === true) {\r\n      this._hide(item)\r\n    } else {\r\n      this._show(item)\r\n    }\r\n  }\r\n\r\n  // Mouseout handle\r\n  private _mouseout = (element: HTMLElement, e: MouseEvent) => {\r\n    const item = this._getItemElement(element)\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'trigger') !== 'hover') {\r\n      return\r\n    }\r\n\r\n    const timeout = setTimeout(() => {\r\n      if (DataUtil.get(item, 'hover') === '1') {\r\n        this._hide(item)\r\n      }\r\n    }, this.options.dropdown.hoverTimeout)\r\n\r\n    DataUtil.set(item, 'hover', '1')\r\n    DataUtil.set(item, 'timeout', timeout)\r\n  }\r\n\r\n  // Mouseover handle\r\n  private _mouseover = (element: HTMLElement, e: MouseEvent) => {\r\n    const item = this._getItemElement(element)\r\n    if (!item) {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'trigger') !== 'hover') {\r\n      return\r\n    }\r\n\r\n    if (DataUtil.get(item, 'hover') === '1') {\r\n      clearTimeout(DataUtil.get(item, 'timeout'))\r\n      DataUtil.remove(item, 'hover')\r\n      DataUtil.remove(item, 'timeout')\r\n    }\r\n\r\n    this._show(item)\r\n  }\r\n\r\n  // Dismiss handler\r\n  private _dismiss = (element: HTMLElement, e: Event) => {\r\n    const item = this._getItemElement(element)\r\n    const items = this._getItemChildElements(item)\r\n    //if ( item !== null && _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\r\n    const itemSubType = this._getItemSubType(item)\r\n    if (item !== null && itemSubType === 'dropdown') {\r\n      this._hide(item) // hide items dropdown\r\n\r\n      // Hide all child elements as well\r\n      if (items.length > 0) {\r\n        for (let i = 0, len = items.length; i < len; i++) {\r\n          //if ( _getItemOption(item, 'trigger') === 'click' &&  _getItemSubType(item) === 'dropdown' ) {\r\n          if (items[i] !== null && this._getItemSubType(items[i] as HTMLElement) === 'dropdown') {\r\n            this._hide(items[i] as HTMLElement)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Link handler\r\n  private _link = (element: HTMLElement, e: Event) => {\r\n    if (EventHandlerUtil.trigger(this.element, 'kt.menu.link.click') === false) {\r\n      return\r\n    }\r\n\r\n    // Dismiss all shown dropdowns\r\n    MenuComponent.hideDropdowns(undefined)\r\n    EventHandlerUtil.trigger(this.element, 'kt.menu.link.clicked')\r\n  }\r\n\r\n  private _click = (element: HTMLElement, e: Event) => {\r\n    e.preventDefault()\r\n    const item = this._getItemElement(element)\r\n    if (this._getItemOption(item, 'trigger') !== 'click') {\r\n      return\r\n    }\r\n\r\n    if (this._getItemOption(item, 'toggle') === false) {\r\n      this._show(item)\r\n    } else {\r\n      this._toggle(item)\r\n    }\r\n  }\r\n\r\n  ///////////////////////\r\n  // ** Public API  ** //\r\n  ///////////////////////\r\n  public click = (element: HTMLElement, e: Event) => {\r\n    return this._click(element, e)\r\n  }\r\n\r\n  public link = (element: HTMLElement, e: Event) => {\r\n    return this._link(element, e)\r\n  }\r\n\r\n  public dismiss = (element: HTMLElement, e: Event) => {\r\n    return this._dismiss(element, e)\r\n  }\r\n\r\n  public mouseover = (element: HTMLElement, e: Event) => {\r\n    return this._mouseover(element, e as MouseEvent)\r\n  }\r\n\r\n  public mouseout = (element: HTMLElement, e: Event) => {\r\n    return this._mouseout(element, e as MouseEvent)\r\n  }\r\n\r\n  // General Methods\r\n  public getItemTriggerType = (item: HTMLElement) => {\r\n    return this._getItemOption(item, 'trigger')\r\n  }\r\n\r\n  public getItemSubType = (element: HTMLElement) => {\r\n    return this._getItemSubType(element)\r\n  }\r\n\r\n  public show = (item: HTMLElement) => {\r\n    return this._show(item)\r\n  }\r\n\r\n  public hide = (item: HTMLElement) => {\r\n    return this._hide(item)\r\n  }\r\n\r\n  public reset = (item: HTMLElement) => {\r\n    return this._reset(item)\r\n  }\r\n\r\n  public update = () => {\r\n    return this._update()\r\n  }\r\n\r\n  public getElement = () => {\r\n    return this.element\r\n  }\r\n\r\n  public getItemLinkElement = (item: HTMLElement) => {\r\n    return this._getItemLinkElement(item)\r\n  }\r\n\r\n  public getItemToggleElement = (item: HTMLElement) => {\r\n    return this._getItemToggleElement(item)\r\n  }\r\n\r\n  public getItemSubElement = (item: HTMLElement) => {\r\n    return this._getItemSubElement(item)\r\n  }\r\n\r\n  public getItemParentElements = (item: HTMLElement) => {\r\n    return this._getItemParentElements(item)\r\n  }\r\n\r\n  public isItemSubShown = (item: HTMLElement) => {\r\n    return this._isItemSubShown(item)\r\n  }\r\n\r\n  public isItemParentShown = (item: HTMLElement) => {\r\n    return this._isItemParentShown(item)\r\n  }\r\n\r\n  public getTriggerElement = () => {\r\n    return this.triggerElement\r\n  }\r\n\r\n  public isItemDropdownPermanent = (item: HTMLElement) => {\r\n    return this._isItemDropdownPermanent(item)\r\n  }\r\n\r\n  // Accordion Mode Methods\r\n  public hideAccordions = (item: HTMLElement) => {\r\n    return this._hideAccordions(item)\r\n  }\r\n\r\n  // Event API\r\n  public on = (name: string, handler: any) => {\r\n    return EventHandlerUtil.on(this.element, name, handler)\r\n  }\r\n\r\n  public one = (name: string, handler: any) => {\r\n    return EventHandlerUtil.one(this.element, name, handler)\r\n  }\r\n\r\n  public off = (name: string) => {\r\n    return EventHandlerUtil.off(this.element, name)\r\n  }\r\n\r\n  // public static methods\r\n  // Get KTMenu instance by element\r\n  public static getInstance = (element: HTMLElement) => {\r\n    // Element has menu DOM reference in it's DATA storage\r\n    const elementMenu = DataUtil.get(element, 'menu')\r\n    if (elementMenu) {\r\n      return elementMenu\r\n    }\r\n\r\n    // Element has .menu parent\r\n    const menu = element.closest('.menu')\r\n    if (menu) {\r\n      const menuData = DataUtil.get(menu as HTMLElement, 'menu')\r\n      if (menuData) {\r\n        return menuData\r\n      }\r\n    }\r\n\r\n    // Element has a parent with DOM reference to .menu in it's DATA storage\r\n    if (element.classList.contains('menu-link')) {\r\n      const sub = element.closest('.menu-sub')\r\n      if (sub) {\r\n        const subMenu = DataUtil.get(sub as HTMLElement, 'menu')\r\n        if (subMenu) {\r\n          return subMenu\r\n        }\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // Hide all dropdowns and skip one if provided\r\n  public static hideDropdowns = (skip: HTMLElement | undefined) => {\r\n    const items = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n\r\n    if (items && items.length > 0) {\r\n      for (let i = 0, len = items.length; i < len; i++) {\r\n        const item = items[i]\r\n        const menu = MenuComponent.getInstance(item as HTMLElement)\r\n\r\n        if (menu && menu.getItemSubType(item) === 'dropdown') {\r\n          if (skip) {\r\n            if (\r\n              menu.getItemSubElement(item).contains(skip) === false &&\r\n              item.contains(skip) === false &&\r\n              item !== skip\r\n            ) {\r\n              menu.hide(item)\r\n            }\r\n          } else {\r\n            menu.hide(item)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static updateDropdowns = () => {\r\n    const items = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n    if (items && items.length > 0) {\r\n      for (var i = 0, len = items.length; i < len; i++) {\r\n        var item = items[i]\r\n\r\n        if (DataUtil.has(item as HTMLElement, 'popper')) {\r\n          DataUtil.get(item as HTMLElement, 'popper').forceUpdate()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Global handlers\r\n  public static createInstances = (selector: string) => {\r\n    // Initialize menus\r\n    document.querySelectorAll(selector).forEach((el) => {\r\n      const menuItem = el as HTMLElement\r\n      let menuInstance = MenuComponent.getInstance(menuItem)\r\n      if (!menuInstance) {\r\n        menuInstance = new MenuComponent(el as HTMLElement, defaultMenuOptions)\r\n      }\r\n    })\r\n  }\r\n\r\n  public static initGlobalHandlers = () => {\r\n    // Dropdown handler\r\n    document.addEventListener('click', (e) => {\r\n      const menuItems = document.querySelectorAll('.show.menu-dropdown[data-kt-menu-trigger]')\r\n      if (menuItems && menuItems.length > 0) {\r\n        for (let i = 0; i < menuItems.length; i++) {\r\n          const item = menuItems[i] as HTMLElement\r\n          const menuObj = MenuComponent.getInstance(item) as MenuComponent\r\n          if (menuObj && menuObj.getItemSubType(item) === 'dropdown') {\r\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n            const menu = menuObj.getElement()\r\n            const sub = menuObj.getItemSubElement(item) as HTMLElement\r\n            if (item === e.target || item.contains(e.target as HTMLElement)) {\r\n              continue\r\n            }\r\n\r\n            if (sub && (sub === e.target || sub.contains(e.target as HTMLElement))) {\r\n              continue\r\n            }\r\n            menuObj.hide(item)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // Sub toggle handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '.menu-item[data-kt-menu-trigger] > .menu-link, [data-kt-menu-trigger]:not(.menu-item):not([data-kt-menu-trigger=\"auto\"])',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu) {\r\n          return menu.click(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // // Link handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '.menu-item:not([data-kt-menu-trigger]) > .menu-link',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        e.stopPropagation()\r\n        const menu = MenuComponent.getInstance(this)\r\n        if (menu && menu.link) {\r\n          return menu.link(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Dismiss handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-dismiss=\"true\"]',\r\n      'click',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu) {\r\n          return menu.dismiss(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Mouseover handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-trigger], .menu-sub',\r\n      'mouseover',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu && menu.getItemSubType(this) === 'dropdown') {\r\n          return menu.mouseover(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Mouseout handler\r\n    DOMEventHandlerUtil.on(\r\n      document.body,\r\n      '[data-kt-menu-trigger], .menu-sub',\r\n      'mouseout',\r\n      function (this: HTMLElement, e: Event) {\r\n        const menu = MenuComponent.getInstance(this) as MenuComponent\r\n        if (menu && menu.getItemSubType(this) === 'dropdown') {\r\n          return menu.mouseout(this, e)\r\n        }\r\n      }\r\n    )\r\n\r\n    // Resize handler\r\n    window.addEventListener('resize', () => {\r\n      let timer\r\n      throttle(\r\n        timer,\r\n        () => {\r\n          // Locate and update Drawer instances on window resize\r\n          const elements = document.querySelectorAll('[data-kt-menu=\"true\"]')\r\n          elements.forEach((el) => {\r\n            const menu = MenuComponent.getInstance(el as HTMLElement)\r\n            if (menu) {\r\n              menu.update()\r\n            }\r\n          })\r\n        },\r\n        200\r\n      )\r\n    })\r\n  }\r\n\r\n  public static bootstrap = () => {\r\n    MenuComponent.initGlobalHandlers()\r\n    MenuComponent.createInstances('[data-kt-menu=\"true\"]')\r\n  }\r\n\r\n  public static reinitialization = () => {\r\n    MenuComponent.createInstances('[data-kt-menu=\"true\"]')\r\n  }\r\n\r\n  public static createInsance = (\r\n    selector: string,\r\n    options: MenuOptions = defaultMenuOptions\r\n  ): MenuComponent | undefined => {\r\n    const element = document.body.querySelector(selector)\r\n    if (!element) {\r\n      return\r\n    }\r\n    const item = element as HTMLElement\r\n    let menu = MenuComponent.getInstance(item)\r\n    if (!menu) {\r\n      menu = new MenuComponent(item, options)\r\n    }\r\n    return menu\r\n  }\r\n}\r\n\r\nexport {MenuComponent, defaultMenuOptions}\r\n"]}]}