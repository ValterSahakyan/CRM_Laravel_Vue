{"remainingRequest":"/home/valter/work/demo7/node_modules/ts-loader/index.js??ref--14-1!/home/valter/work/demo7/node_modules/eslint-loader/index.js??ref--13-0!/home/valter/work/demo7/src/assets/ts/_utils/_DOMEventHandlerUtil.ts","dependencies":[{"path":"/home/valter/work/demo7/src/assets/ts/_utils/_DOMEventHandlerUtil.ts","mtime":1636661312000},{"path":"/home/valter/work/demo7/node_modules/cache-loader/dist/cjs.js","mtime":1665764724378},{"path":"/home/valter/work/demo7/node_modules/ts-loader/index.js","mtime":1665764724869},{"path":"/home/valter/work/demo7/node_modules/eslint-loader/index.js","mtime":1665764716618}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0VW5pcXVlSWRXaXRoUHJlZml4IH0gZnJvbSAnLi9fVHlwZXNIZWxwZXJzJzsKdmFyIERPTUV2ZW50SGFuZGxlclV0aWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBET01FdmVudEhhbmRsZXJVdGlsKCkgewogICAgfQogICAgRE9NRXZlbnRIYW5kbGVyVXRpbC5vbiA9IGZ1bmN0aW9uIChlbGVtZW50LCBzZWxlY3RvciwgZXZlbnROYW1lLCBjYWxsQmFjaykgewogICAgICAgIHZhciBldmVudElkID0gZ2V0VW5pcXVlSWRXaXRoUHJlZml4KCdET01FdmVudCcpOwogICAgICAgIERPTUV2ZW50SGFuZGxlclV0aWwuc3RvcmUuc2V0KGV2ZW50SWQsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0YXJnZXRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsKICAgICAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwogICAgICAgICAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZWxlbWVudCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdGFyZ2V0c1tpXSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYWxsQmFjay5jYWxsKHRhcmdldCwgZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgRE9NRXZlbnRIYW5kbGVyVXRpbC5zdG9yZS5nZXQoZXZlbnRJZCkpOwogICAgICAgIHJldHVybiBldmVudElkOwogICAgfTsKICAgIERPTUV2ZW50SGFuZGxlclV0aWwub2ZmID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnRJZCkgewogICAgICAgIHZhciBmdW5jRnJvbVN0b3JlID0gRE9NRXZlbnRIYW5kbGVyVXRpbC5zdG9yZS5nZXQoZXZlbnRJZCk7CiAgICAgICAgaWYgKCFmdW5jRnJvbVN0b3JlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuY0Zyb21TdG9yZSk7CiAgICAgICAgRE9NRXZlbnRIYW5kbGVyVXRpbC5zdG9yZS5kZWxldGUoZXZlbnRJZCk7CiAgICB9OwogICAgRE9NRXZlbnRIYW5kbGVyVXRpbC5vbmUgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsQmFjaykgewogICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uIGNhbGVlKGUpIHsKICAgICAgICAgICAgLy8gcmVtb3ZlIGV2ZW50CiAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgY2FsZWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbGVtZW50ICYmIGUgJiYgZS5jdXJyZW50VGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAvLyBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZSAmJiBlLmN1cnJlbnRUYXJnZXQpIHsKICAgICAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgY2FsZWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGNhbGwgaGFuZGVyCiAgICAgICAgICAgIHJldHVybiBjYWxsQmFjayhlKTsKICAgICAgICB9KTsKICAgIH07CiAgICBET01FdmVudEhhbmRsZXJVdGlsLnN0b3JlID0gbmV3IE1hcCgpOwogICAgcmV0dXJuIERPTUV2ZW50SGFuZGxlclV0aWw7Cn0oKSk7CmV4cG9ydCB7IERPTUV2ZW50SGFuZGxlclV0aWwgfTsK"},{"version":3,"file":"/home/valter/work/demo7/src/assets/ts/_utils/_DOMEventHandlerUtil.ts","sourceRoot":"","sources":["/home/valter/work/demo7/node_modules/eslint-loader/index.js??ref--13-0!/home/valter/work/demo7/src/assets/ts/_utils/_DOMEventHandlerUtil.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,qBAAqB,EAAC,MAAM,iBAAiB,CAAA;AAErD;IAAA;IAyDA,CAAC;IAtDe,sBAAE,GAAhB,UACE,OAAoB,EACpB,QAAgB,EAChB,SAAiB,EACjB,QAAa;QAEb,IAAM,OAAO,GAAG,qBAAqB,CAAC,UAAU,CAAC,CAAA;QACjD,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,UAAC,CAAQ;YAC9C,IAAM,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAA;YAClD,IAAI,MAAM,GAAuB,CAAC,CAAC,MAAqB,CAAA;YACxD,OAAO,MAAM,IAAI,MAAM,KAAK,OAAO,EAAE;gBACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACvC,IAAI,MAAM,KAAK,OAAO,CAAC,CAAC,CAAC,EAAE;wBACzB,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;qBACzB;iBACF;gBAED,IAAI,MAAM,CAAC,aAAa,EAAE;oBACxB,MAAM,GAAG,MAAM,CAAC,aAAa,CAAA;iBAC9B;qBAAM;oBACL,MAAM,GAAG,IAAI,CAAA;iBACd;aACF;QACH,CAAC,CAAC,CAAA;QACF,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;QAC3E,OAAO,OAAO,CAAA;IAChB,CAAC;IAEa,uBAAG,GAAjB,UAAkB,OAAoB,EAAE,SAAiB,EAAE,OAAe;QACxE,IAAM,aAAa,GAAG,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;QAC5D,IAAI,CAAC,aAAa,EAAE;YAClB,OAAM;SACP;QAED,OAAO,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAA;QACrD,mBAAmB,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;IAC3C,CAAC;IAEa,uBAAG,GAAjB,UAAkB,OAAoB,EAAE,SAAiB,EAAE,QAAkB;QAC3E,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,KAAK,CAAC,CAAC;YAClD,eAAe;YACf,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,mBAAmB,EAAE;gBAC5C,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;aAC5C;YAED,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE;gBACnC,wEAAwE;gBACxE,CAAC,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;aACnD;YAED,cAAc;YACd,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAA;QACpB,CAAC,CAAC,CAAA;IACJ,CAAC;IAvDa,yBAAK,GAAG,IAAI,GAAG,EAAE,CAAA;IAwDjC,0BAAC;CAAA,AAzDD,IAyDC;SAzDY,mBAAmB","sourcesContent":["import {getUniqueIdWithPrefix} from './_TypesHelpers'\r\n\r\nexport class DOMEventHandlerUtil {\r\n  public static store = new Map()\r\n\r\n  public static on(\r\n    element: HTMLElement,\r\n    selector: string,\r\n    eventName: string,\r\n    callBack: any\r\n  ): string {\r\n    const eventId = getUniqueIdWithPrefix('DOMEvent')\r\n    DOMEventHandlerUtil.store.set(eventId, (e: Event) => {\r\n      const targets = element.querySelectorAll(selector)\r\n      let target: HTMLElement | null = e.target as HTMLElement\r\n      while (target && target !== element) {\r\n        for (let i = 0; i < targets.length; i++) {\r\n          if (target === targets[i]) {\r\n            callBack.call(target, e)\r\n          }\r\n        }\r\n\r\n        if (target.parentElement) {\r\n          target = target.parentElement\r\n        } else {\r\n          target = null\r\n        }\r\n      }\r\n    })\r\n    element.addEventListener(eventName, DOMEventHandlerUtil.store.get(eventId))\r\n    return eventId\r\n  }\r\n\r\n  public static off(element: HTMLElement, eventName: string, eventId: string): void {\r\n    const funcFromStore = DOMEventHandlerUtil.store.get(eventId)\r\n    if (!funcFromStore) {\r\n      return\r\n    }\r\n\r\n    element.removeEventListener(eventName, funcFromStore)\r\n    DOMEventHandlerUtil.store.delete(eventId)\r\n  }\r\n\r\n  public static one(element: HTMLElement, eventName: string, callBack: Function): void {\r\n    element.addEventListener(eventName, function calee(e) {\r\n      // remove event\r\n      if (e.target && e.target.removeEventListener) {\r\n        e.target.removeEventListener(e.type, calee)\r\n      }\r\n\r\n      if (element && e && e.currentTarget) {\r\n        // if (element && element.removeEventListener && e && e.currentTarget) {\r\n        e.currentTarget.removeEventListener(e.type, calee)\r\n      }\r\n\r\n      // call hander\r\n      return callBack(e)\r\n    })\r\n  }\r\n}\r\n"]}]}